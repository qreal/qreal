<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="TRIKStudio, help, manual, user guide" />
<meta name="description" content="TRIKStudio help center" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Программирование Lego EV3 в TRIKStudio</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="version.js"></script>
</head>

<body>
<div id="wrapper">
	<script type="text/javascript" src="header.html.js"></script>
	<div id="page" class="container">
		<div id="sidebar">
			<script type="text/javascript" src="contents.html.js"></script>
		</div>
		<div id="content">
			<div class="post">
				<h2 class="title">Программирование Lego EV3 в TRIKStudio<a href="#"></a></h2>
				<div class="entry">
					<p></p>
				</div>
			</div>

			<h3><a name="robot-setup">Подключение робота</a></h3>

			<p>
			Первое, что необходимо сделать для программирования Lego EV3 – переключить TRIKStudio в режим поддержки Lego EV3. Это делается в окне "Настройки", вкладка "Роботы":
			</p>

			<center><img src="pics/ev3/kit-selection.png" alt="Выбор конструктора Lego EV3" width="660"></center>

			<h4>Подключение по Bluetooth</h4>

			<p>
			Процедура подключения робота Lego EV3 по Bluetooth со стороны компьютера полностью аналогична подключению робота Lego NXT и подробно описана в <a href="nxt.html#connection">соответствующем разделе документации для Lego NXT</a>. Другие способы подключения к роботу пока не поддержаны.
			</p>

			<h3><a name="blocks">Блоки Lego EV3</a></h3>

			<p>
			Специализированные блоки для Lego EV3 делятся на несколько категорий:
			</p>

			<ul>
				<li><b><a href="#ev3-functional-blocks">Действия</a></b> – блоки, выполняющие какое-либо действие на роботе: включение моторов, проигрывание звука и т.д.</li>
				<li><b><a href="#ev3-waiting-blocks">Ожидания</a></b> – блоки, ждущие наступления какого-либо события: определённых показаний датчиков, нажатия на кнопку и т.д.</li>
				<li><b><a href="#ev3-drawing-blocks">Рисования на дисплее</a></b> – блоки, используемые для вывода графики и текста на экран.</li>
			</ul>

			<h4><a name="ev3-functional-blocks">Действия</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Гудок</td>
					<td><center><img src="pics/ev3/beep.png" alt="Гудок"></center></td>
					<td>Проиграть на роботе звук с фиксированной частотой. Имеется один параметр — ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. Допустимые значения — Истина и Ложь.</td>
				</tr>
				<tr>
					<td>Играть звук</td>
					<td><center><img src="pics/ev3/playTone.png" alt="Играть звук"></center></td>
					<td>Проиграть на роботе звук с заданной частотой и длительностью. Аналогичен блоку "Гудок", но позволяет задавать параметры звука. Имеется параметр, определяющий, ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. </td>
				</tr>
				<tr>
					<td>Моторы вперёд</td>
					<td><center><img src="pics/ev3/enginesForward.png" alt="Моторы вперёд"></center></td>
					<td>Включить моторы по заданным портам с заданной мощностью. Порты задаются буквами A, B, C или D, разделенными запятыми. Мощность задаётся в процентах числом от -100 до 100, если задано отрицательное значение, мотор включается в режиме реверса. Так, на картинке изображена команда включения моторов на портах B и C с мощностью 100%. Кроме того, моторы имеют разные режимы работы: режим торможения и режим скольжения (отображаемые красным или зелёным прямоугольником на блоке соответственно). Режимы влияют на то, как двигатель отрабатывает команду — режим торможения стопорит двигатель при отключении, режим скольжения позволяет двигателю прокручиваться по инерции.
					</td>
				</tr>
				<tr>
					<td>Моторы назад</td>
					<td><center><img src="pics/ev3/enginesBackward.png" alt="Моторы назад"></center></td>
					<td>Включить моторы в режиме реверса по заданным портам с заданной мощностью. Параметры аналогичны параметрами блока "Моторы вперёд".</td>
				</tr>
				<tr>
					<td>Моторы стоп</td>
					<td><center><img src="pics/ev3/enginesStop.png" alt="Моторы стоп"></center></td>
					<td>Выключить моторы по заданным портам.</td>
				</tr>
			</table>

			<br/>

			<h4><a name="ev3-waiting-blocks">Ожидания</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Ждать сенсор касания</td>
					<td><center><img src="pics/ev3/waitTouch.png" alt="Ждать сенсор касания"></center></td>
					<td>Ждать, пока не сработает датчик касания. Параметром указывается номер порта, к которому
							подключен датчик. Допустимые значения: 1, 2, 3, 4.</td>
				</tr>
				<tr>
					<td>Ждать сонар</td>
					<td><center><img src="pics/ev3/waitSonar.png" alt="Ждать сенсор расстояния"></center></td>
					<td>Ждать, пока расстояние, возвращаемое ультразвуковым или инфракрасным сенсором расстояния, не
							будет сравнимо с указанным в значении параметра "Расстояние" (расстояние задается в
							сантиметрах, от 0 до 255). Еще один парамер — номер порта, к которому подключен датчик
							расстояния. Также параметром указывается операция, которая будет использоваться для
							сравнения с введенным расстоянием. Так, при выполнении приведенного блока выполнение
							программы остановится до тех пор, пока значение, возвращаемое датчиком, не будет больше,
							чем 40 см.</td>
				</tr>
<!--				<tr>
					<td>Ждать цвет</td>
					<td><center><img src="pics/ev3-waitColorBlock.png" alt="Ждать цвет"></center></td>
					<td>Ждать, пока сенсор цвета в режиме распознавания цветов не вернет указанный цвет.</td>
				</tr>-->
				<tr>
					<td>Ждать нажатия кнопки</td>
					<td><center><img src="pics/ev3/waitForButton.png" alt="Ждать нажатия кнопки"></center></td>
					<td>Ждать, пока не будет нажата указанная в качестве параметра кнопка на корпусе робота.</td>
				</tr>
			</table>

			<h4><a name="ev3-drawing-blocks">Рисование на дисплее</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Нарисовать прямоугольник</td>
					<td><center><img src="pics/ev3/drawRect.png" alt="Нарисовать прямоугольник"></center></td>
					<td>Нарисовать на экране прямоугольник. В качестве параметров указываются координаты левого верхнего
							угла, ширина и высота прямоугольника, а также заливать его внутреннюю область или нет.</td>
				</tr>
				<tr>
					<td>Нарисовать точку</td>
					<td><center><img src="pics/ev3/drawPoint.png" alt="Нарисовать точку"></center></td>
					<td>Нарисовать на экране точку в указанных координатах.</td>
				</tr>
				<tr>
					<td>Нарисовать линию</td>
					<td><center><img src="pics/ev3/drawLine.png" alt="Нарисовать линию"></center></td>
					<td>Нарисовать на экране отрезок. В качестве параметров блоку указываются концы отрезка.</td>
				</tr>
				<tr>
					<td>Нарисовать круг</td>
					<td><center><img src="pics/ev3/drawCircle.png" alt="Нарисовать круг"></center></td>
					<td>Нарисовать на экране круг с заданным центром и заданным радиусом, залитый внутри или нет.</td>
				</tr>
				<tr>
					<td>Напечатать текст</td>
					<td><center><img src="pics/ev3/printText.png" alt="Напечатать текст"></center></td>
					<td>Напечатать заданное значение в заданных координатах на экране. Обратите внимание, что
							напечатается результат вычисления выражения, поэтому строки, которые нужно вывести на экран,
							надо заключать в кавычки.</td>
				</tr>
				<tr>
					<td>Очистить экран</td>
					<td><center><img src="pics/ev3/clearScreen.png" alt="Очистить экран"></center></td>
					<td>Стереть всё, что нарисовано на экране.</td>
				</tr>
			</table>

			<p>
			Описание блоков, общих для всех конструкторов, можно посмотреть в разделе
			<a href="programming.html#blocks">Создание программ/Создание блоков</a>.
			</p>

			<h3><a name="sensor-variables">Сенсорные переменные</a></h3>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>buttonBack, buttonDown, buttonEnter, buttonLeft, buttonRight, buttonUp</td>
					<td>Состояние кнопок на корпусе робота: кнопки "Назад", "Вниз", "Ввод", "Влево", "Вправо", "Вверх"
							соответственно. 0 соответствует ненажатой кнопке, 1 – нажатой.</td>
				</tr>
				<tr>
					<td>sensor1, sensor2, sensor3, sensor4</td>
					<td>Показания датчиков на портах 1, 2, 3, 4 соответственно.</td>
				</tr>
			</table>

			<h3><a name="run-programs">Запуск программ</a></h3>

			<p>
			Программы для Lego EV3 пока можно исполнять только в режиме интерпретации по Bluetooth, поддержка других
			режимов будет добавлена в будущем.
			</p>

			<h4><a name="run-programs-bluetooth">Интерпретация по Bluetooth</a></h4>

			<p>
			Чтобы запустить программу на выполнение, необходимо подключиться к роботу, нажав на кнопку "Подключиться",
			после чего нажать кнопку "Выполнить" панели "Интерпретатор" или меню "Инструменты":
			</p>

			<center><img src="pics/ev3/execute-toolbar.png" alt="Запуск программы"></center>

			<p>
			После этого интерпретатор ищет блок "Начало", с которого и начинается выполнение программы. Если такой блок
			на диаграмме не найден, будет выдано сообщение об ошибке. Для каждого функционального блока должна
			существовать ровно одна исходящая связь, по которой выполнение программы перейдет к следующему блоку.
			В противном случае будет выдано сообщение об ошибке.
			</p>

			<p>
			Для того, чтобы остановить выполнение программы, нужно нажать кнопку "Прервать выполнение" панели
			"Интерпретатор" или меню "Инструменты":
			</p>

			<center><img src="pics/ev3/stop-interpreter.png" alt="Остановка программы"></center>

		</div>
		<!-- end #content -->
		<div style="clear: both;">&nbsp;</div>
	</div>
	<!-- end #page -->
</div>
<script type="text/javascript" src="footer.html.js"></script>
</body>
</html>
