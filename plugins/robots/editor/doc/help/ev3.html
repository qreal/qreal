<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="TRIKStudio, help, manual, user guide" />
<meta name="description" content="TRIKStudio help center" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Программирование Lego EV3 в TRIKStudio</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="version.js"></script>
</head>

<body>
<div id="wrapper">
	<script type="text/javascript" src="header.html.js"></script>
	<div id="page" class="container">
		<div id="sidebar">
			<script type="text/javascript" src="contents.html.js"></script>
		</div>
		<div id="content">
			<div class="post">
				<h2 class="title">Программирование Lego EV3 в TRIKStudio<a href="#"></a></h2>
				<div class="entry">
					<p></p>
				</div>
			</div>

			<h3><a name="robot-setup">Подключение робота</a></h3>

			<p>
			Первое, что необходимо сделать для программирования Lego EV3 – переключить TRIKStudio в режим поддержки
			Lego EV3. Это делается в окне "Настройки", вкладка "Роботы":
			</p>

			<center><img src="pics/ev3/kit-selection.png" alt="Выбор конструктора Lego EV3" width="660"></center>

			<h4>Подключение по Bluetooth</h4>

			<p>
			Процедура подключения робота Lego EV3 по Bluetooth со стороны компьютера полностью аналогична подключению
			робота Lego NXT и подробно описана в <a href="nxt.html#connection">соответствующем разделе документации
			для Lego NXT</a>.
			</p>

			<h4>Подключение по USB</h4>

			<p>
			Подключите USB-провод к EV3 и к компьютеру с TRIK Studio, включите EV3. После этого можно загружать
			программы на робот, никаких дополнительных действий и драйверов не требуется.
			</p>

			<h3><a name="blocks">Блоки Lego EV3</a></h3>

			<p>
			Специализированные блоки для Lego EV3 делятся на несколько категорий:
			</p>

			<ul>
				<li><b><a href="#ev3-functional-blocks">Действия</a></b> – блоки, выполняющие какое-либо действие на роботе: включение моторов, проигрывание звука и т.д.</li>
				<li><b><a href="#ev3-waiting-blocks">Ожидания</a></b> – блоки, ждущие наступления какого-либо события: определённых показаний датчиков, нажатия на кнопку и т.д.</li>
				<li><b><a href="#ev3-drawing-blocks">Рисования на дисплее</a></b> – блоки, используемые для вывода графики и текста на экран.</li>
			</ul>

			<h4><a name="ev3-functional-blocks">Действия</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Гудок</td>
					<td><center><img src="pics/ev3/beep.png" alt="Гудок"></center></td>
					<td>Проиграть на роботе звук с фиксированной частотой. Имеется один параметр — ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. Допустимые значения — Истина и Ложь.</td>
				</tr>
				<tr>
					<td>Играть звук</td>
					<td><center><img src="pics/ev3/playTone.png" alt="Играть звук"></center></td>
					<td>Проиграть на роботе звук с заданной частотой и длительностью. Аналогичен блоку "Гудок", но позволяет задавать параметры звука. Имеется параметр, определяющий, ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. </td>
				</tr>
				<tr>
					<td>Моторы вперёд</td>
					<td><center><img src="pics/ev3/enginesForward.png" alt="Моторы вперёд"></center></td>
					<td>Включить моторы по заданным портам с заданной мощностью. Порты задаются буквами A, B, C или D, разделенными запятыми. Мощность задаётся в процентах числом от -100 до 100, если задано отрицательное значение, мотор включается в режиме реверса. Так, на картинке изображена команда включения моторов на портах B и C с мощностью 100%. Кроме того, моторы имеют разные режимы работы: режим торможения и режим скольжения (отображаемые красным или зелёным прямоугольником на блоке соответственно). Режимы влияют на то, как двигатель отрабатывает команду — режим торможения стопорит двигатель при отключении, режим скольжения позволяет двигателю прокручиваться по инерции.
					</td>
				</tr>
				<tr>
					<td>Моторы назад</td>
					<td><center><img src="pics/ev3/enginesBackward.png" alt="Моторы назад"></center></td>
					<td>Включить моторы в режиме реверса по заданным портам с заданной мощностью. Параметры аналогичны параметрами блока "Моторы вперёд".</td>
				</tr>
				<tr>
					<td>Моторы стоп</td>
					<td><center><img src="pics/ev3/enginesStop.png" alt="Моторы стоп"></center></td>
					<td>Выключить моторы по заданным портам.</td>
				</tr>
				<tr>
					<td>Сбросить показания энкодера</td>
					<td><center><img src="pics/ev3/clearEncoder.png" alt="Сбросить показания энкодера"></center></td>
					<td>Сбросить энкодеры на указанных портах в 0.</td>
				</tr>
				<tr>
					<td>Светодиод</td>
					<td><center><img src="pics/ev3/led.png" alt="Светодиод"></center></td>
					<td>Включить светодиод с заданным цветом на корпусе робота.</td>
				</tr>
			</table>

			<br/>

			<h4><a name="ev3-waiting-blocks">Ожидания</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Ждать сенсор касания</td>
					<td><center><img src="pics/ev3/waitTouch.png" alt="Ждать сенсор касания"></center></td>
					<td>Ждать, пока не сработает датчик касания. Параметром указывается номер порта, к которому
							подключен датчик. Допустимые значения: 1, 2, 3, 4.</td>
				</tr>
				<tr>
					<td>Ждать энкодер</td>
					<td><center><img src="pics/ev3/waitEncoder.png" alt="Ждать энкодер"></center></td>
					<td>Ждать, пока количество оборотов мотора, которые вернул энкодер на заданном порту, не будет
							сравнимо с указанным в значении параметра "Предел оборотов". Также указывается операция,
							которая будет использоваться для сравнения с введенным пределом оборотов. Так, при
							исполнении приведенного блока выполнение программы остановится до тех пор, пока значение,
							возвращаемое энкодером, не будет больше 40.</td>
				</tr>
				<tr>
					<td>Ждать цвет</td>
					<td><center><img src="pics/ev3/waitColor.png" alt="Ждать цвет"></center></td>
					<td>Ждать, пока сенсор цвета на указанном порту в режиме распознавания цветов не вернет указанный
							цвет.</td>
				</tr>
				<tr>
					<td>Ждать интенсивность цвета</td>
					<td><center><img src="pics/ev3/waitLightIntensity.png" alt="Ждать интенсивность цвета"></center></td>
					<td>Ждать, пока значение интенсивности, возвращаемое сенсором цвета на указанном порту в режиме
							измерения интенсивности, не будет сравнимо с указанным в значении параметра "Интенсивность"
							(интенсивность задается в процентах, от 0 до 100, меньшие значения соответствуют более
							тёмным цветам). Также параметром указывается операция, которая будет использоваться для
							сравнения с введенной интенсивностью. Так, при исполнении приведенного блока выполнение
							программы остановится до тех пор, пока значение, возвращаемое датчиком, не будет больше 40.
					</td>
				</tr>
				<tr>
					<td>Ждать свет</td>
					<td><center><img src="pics/ev3/waitLight.png" alt="Ждать свет"></center></td>
					<td>Ждать, пока значение интенсивности, возвращаемое датчиком света на указанном порту, не будет
							сравнимо с указанным в значении параметра "Проценты" (от 0 до 100, меньшие значения
							соответствуют тёмному, большие – светлому). Также параметром указывается операция, которая
							будет использоваться для сравнения с введенными процентами. Так, при исполнении приведенного
							блока выполнение программы остановится до тех пор, пока значение, возвращаемое датчиком,
							не будет больше 40.
					</td>
				</tr>
				<tr>
					<td>Ждать сенсор расстояния</td>
					<td><center><img src="pics/ev3/waitSonar.png" alt="Ждать сенсор расстояния"></center></td>
					<td>Ждать, пока расстояние, возвращаемое ультразвуковым или инфракрасным сенсором расстояния, не
							будет сравнимо с указанным в значении параметра "Расстояние" (расстояние задается в
							сантиметрах, от 0 до 255). Еще один парамер — номер порта, к которому подключен датчик
							расстояния. Также параметром указывается операция, которая будет использоваться для
							сравнения с введенным расстоянием. Так, при исполнении приведенного блока выполнение
							программы остановится до тех пор, пока значение, возвращаемое датчиком, не будет больше,
							чем 40 см.</td>
				</tr>
				<tr>
					<td>Ждать нажатия кнопки</td>
					<td><center><img src="pics/ev3/waitForButton.png" alt="Ждать нажатия кнопки"></center></td>
					<td>Ждать, пока не будет нажата указанная в качестве параметра кнопка на корпусе робота.</td>
				</tr>
			</table>

			<h4><a name="ev3-drawing-blocks">Рисование на дисплее</a></h4>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название элемента</b></td>
					<td><b>Пиктограмма</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>Нарисовать прямоугольник</td>
					<td><center><img src="pics/ev3/drawRect.png" alt="Нарисовать прямоугольник"></center></td>
					<td>Нарисовать на экране прямоугольник. В качестве параметров указываются координаты левого верхнего
							угла, ширина и высота прямоугольника, а также заливать его внутреннюю область или нет.</td>
				</tr>
				<tr>
					<td>Нарисовать точку</td>
					<td><center><img src="pics/ev3/drawPoint.png" alt="Нарисовать точку"></center></td>
					<td>Нарисовать на экране точку в указанных координатах.</td>
				</tr>
				<tr>
					<td>Нарисовать линию</td>
					<td><center><img src="pics/ev3/drawLine.png" alt="Нарисовать линию"></center></td>
					<td>Нарисовать на экране отрезок. В качестве параметров блоку указываются концы отрезка.</td>
				</tr>
				<tr>
					<td>Нарисовать круг</td>
					<td><center><img src="pics/ev3/drawCircle.png" alt="Нарисовать круг"></center></td>
					<td>Нарисовать на экране круг с заданным центром и заданным радиусом, залитый внутри или нет.</td>
				</tr>
				<tr>
					<td>Напечатать текст</td>
					<td><center><img src="pics/ev3/printText.png" alt="Напечатать текст"></center></td>
					<td>Печатает заданную строку в заданном месте на экране робота. Значение свойства "Текст" по умолчанию трактуется как строка в чистом виде, оно так и будет выведено на экран. Чтобы система считала, что это выражение на текстовом языке (это может быть полезно, например, при отладке значения переменных), поставьте галочку "Вычислять" в редакторе свойств.</td>
				</tr>
				<tr>
					<td>Очистить экран</td>
					<td><center><img src="pics/ev3/clearScreen.png" alt="Очистить экран"></center></td>
					<td>Стереть всё, что нарисовано на экране.</td>
				</tr>
			</table>

			<p>
			Описание блоков, общих для всех конструкторов, можно посмотреть в разделе
			<a href="programming.html#blocks">Создание программ/Создание блоков</a>.
			</p>

			<h3><a name="sensor-variables">Сенсорные переменные</a></h3>

			<table cellspacing="2" border="1" cellpadding="5" width="800" >
				<tr>
					<td><b>Название</b></td>
					<td><b>Описание</b></td>
				</tr>
				<tr>
					<td>buttonBack, buttonDown, buttonEnter, buttonLeft, buttonRight, buttonUp</td>
					<td>Состояние кнопок на корпусе робота: кнопки "Назад", "Вниз", "Ввод", "Влево", "Вправо", "Вверх"
							соответственно. 0 соответствует ненажатой кнопке, 1 – нажатой.</td>
				</tr>
				<tr>
					<td>encoderA, encoderB, encoderC, encoderD</td>
					<td>Показания энкодеров на портах A, B, C, D соответственно.</td>
				</tr>
				<tr>
					<td>sensor1, sensor2, sensor3, sensor4</td>
					<td>Показания датчиков на портах 1, 2, 3, 4 соответственно.</td>
				</tr>
			</table>

			<h3><a name="run-programs">Запуск программ</a></h3>

			<h4><a name="run-programs-bluetooth">Интерпретация по Bluetooth или по USB</a></h4>

			<p>
			Чтобы запустить программу на выполнение, необходимо подключиться к роботу, нажав на кнопку "Подключиться",
			после чего нажать кнопку "Выполнить" панели "Интерпретатор" или меню "Инструменты":
			</p>

			<center><img src="pics/ev3/execute-toolbar.png" alt="Запуск программы"></center>

			<p>
			После этого интерпретатор ищет блок "Начало", с которого и начинается выполнение программы. Если такой блок
			на диаграмме не найден, будет выдано сообщение об ошибке. Для каждого функционального блока должна
			существовать ровно одна исходящая связь, по которой выполнение программы перейдет к следующему блоку.
			В противном случае будет выдано сообщение об ошибке.
			</p>

			<p>
			Для того, чтобы остановить выполнение программы, нужно нажать кнопку "Прервать выполнение" панели
			"Интерпретатор" или меню "Инструменты".
			</p>

			<h4><a name="run-programs-flashing">Прошивка в робота</a></h4>

			<p>
			Загрузка программы на робот позволяет сохранить программу на роботе и исполнять её без соединения с
			компьютером. В отличие от Lego NXT, средства загрузки и исполнения программ TRIK Studio не требуют
			дополнительных манипуляций с роботом и работают со стандартной прошивкой. Первое, что нужно сделать, чтобы
			загрузить программу – переключиться в режим автономного исполнения по Bluetooth или USB (в зависимости от
			желаемого типа соединения с роботом для загрузки программы).
			</p>

			<center><img src="pics/ev3/generationMode.png" alt="Переключение в режим генерации" /></center>

			<p>
			Далее запустить программу на исполнение очень просто: достаточно нажать на "Запустить программу".
			</p>

			<center><img src="pics/ev3/runProgram.png" alt="Кнопка запуска программы" /></center>

			<p>
			По программе будет сгенерирован код на внутреннем языке EV3, загружен на робот и немедленно запущен на
			исполнение. Если требуется только загрузить программу, не запуская её, нужно воспользоваться кнопкой
			"Загрузить программу".
			</p>

			<center><img src="pics/ev3/uploadProgram.png" alt="Кнопка загрузки программы" /></center>

			<p>
			Эксперты в EV3 могут посмотреть на сгенерированный на внутреннем языке EV3 код с помощью кнопки
			"Сгенерировать в байткод EV3". Теоретически, его можно подредактировать и запустить на исполнение, или
			вообще использовать для текстового программирования EV3, но делать это неудобно – язык
			создавался для автоматической генерации, а не написания программ.
			</p>

			<center><img src="pics/ev3/generateBytecode.png" alt="Кнопка загрузки программы" /></center>

		</div>
		<!-- end #content -->
		<div style="clear: both;">&nbsp;</div>
	</div>
	<!-- end #page -->
</div>
<script type="text/javascript" src="footer.html.js"></script>
</body>
</html>
