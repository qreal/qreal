<html>
<head>

<title>QReal:Robots</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />

</head>
<body>

<h2>Запуск программ в QReal:Robots</h2>

В QReal:Robots существует несколько вариантов выполнения программ: 
<il>
  <li>пошаговая интерпретация диаграмммы с посылкой команд в робота по Bluetooth или моделированием поведения робота с помощью двухмерной модели,</li>
  <li>прошивка и дальнейшее автономное исполнение программы на роботе без связи с компьютером.</li>
</il>

<h3><a name="bluetooth">Интерпретация диаграмм с посылкой команд по Bluetooth</a></h3>

<div>
Чтобы запустить программу на выполнение, необходимо нажать кнопку "Выполнить" панели "Интерпретатор" или меню "Инструменты":
</div>
<br/>

<center><img src="pics/execute-toolbar.png" alt="Запуск программы"></center>

<br/><br/>

<div>
После этого интерпретатор ищет блок "Начало", с которого и начинается выполнение программы. Если такой блок на диаграмме не найден, будет выдано сообщение об ошибке. Для каждого функционального блока (см. раздел <a href="programming.html#functional">Блоки в QReal:Robots</a>) должна существовать ровно одна исходящая связь, по которой выполнение программы перейдет к следующему блоку. В противном случае будет выдано сообщение об ошибке.

<br/><br/>

Для того, чтобы остановить выполнение программы, нужно нажать кнопку "Прервать выполнение" панели "Интерпретатор" или меню "Инструменты".
</div>

<br />
<h3><a name="flashing">Прошивка программ в робота</a></h3>

<div>
Для прошивки программ в робота в QReal:Robots необходим дополнительный пакет инструментов, который можно скачать <a href="https://github.com/qreal/qreal/wiki/%D0%9F%D0%B5%D1%80%D0%B5%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B0-%D1%80%D0%BE%D0%B1%D0%BE%D1%82%D0%B0-lego-mindstorms-NXT-2.0">с сайта проекта</a>. Для установки нужно распаковать архив в корень директории, в которую установлен QReal. При этом иерархия каталогов должна получиться следующая (сюда бы картинку со скриншотом проводника):
</div>

<br/>

<center><img src="pics/execute-nxt-hierarchy.png" alt="Иерархия каталогов"></center>

<br/><br/>

<div>
Для того, чтобы запускать программы на роботе, вместо стандартной операционной системы Lego Mindstorms NXT 2.0 необходимо использовать прошивку nxtOSEK, которая является расширением стандартной системы, позволяющим сохранять программы с компьютера по USB и запускать их на роботе. Чтобы записать в робота прошивку nxtOSEK, необходимо подключить его по USB к компьютеру, перевести робота в режим перезагрузки (нажать и удерживать 4 секунды кнопку Reset на задней панели управляющего блока робота) и нажать в QReal:Robots кнопку "Прошить" панели инструментов "Взаимодействие с роботом". Дождитесь информационного сообщения, подтверждающего завершение операции прошивки операционной системы. В случае неуспешного завершения убедитесь, что в каталоге, куда был установлен QReal:Robots, присутствует каталог nxt-tools, робот корректно подключен к компьютеру с помощью USB-провода и находится в режиме перезагрузки, после чего попробуйте перезаписать образ операционной системы еще раз.

<br/><br/>

Когда прошивка успешно перезаписана, робот готов к загрузке на него и выполнению программ. Для этого нужно убедиться, что робот корректно подключен по USB к компьютеру и находится во включенном состоянии. После этого нужно нажать кнопку "Загрузить" панели инструментов "Взаимодействие с роботом". В редакторе диаграмм откроется дополнительная вкладка, на которой будет показан код на Си-подобном языке, поддерживаемом операционной системой nxtOSEK. Этот код будет скомпилирован в исполняемую программу и загружен в робота. При неудачном завершении операции будет выдано информационное сообщение, описывающее проблему.
</div>



</body>
</html>
